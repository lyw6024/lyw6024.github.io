<!DOCTYPE html>
<html lang="en">
<head>
          <title>faint - LaTeX中使用bib文件组织自己的文献库</title>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
        <link rel="stylesheet" type="text/css" href="theme/css/foundation.css" />
        <link rel="stylesheet" type="text/css" href="theme/css/style.css" />





</head>

<body>
        <header>
          <nav id="site-navigation" class="main-navigation navbar-fixed-top navbar-left" role="navigation">
            <div class="container" id="navigation_menu">
              <div class="navbar-header">
              <hgroup><h1><a class="navbar-brand" href="lyw6024.github.io/">faint</a></h1></hgroup>
              </div>
        <ul>
        </ul>
            </div>
          </nav>
        </header>

        <div id="content" class="site-content grid-container full">
          <div class="container grid-x grid-margin-x">
              <div class="cell small-2"></div>
              <div id="primary" class="cell small-8 content-area">
              <main>
<article class="post-content">
  <header class="entry-header">
    <h2 class="entry-title">
      <a href="lyw6024.github.io/p1925.html" rel="bookmark"
         title="Permalink to LaTeX中使用bib文件组织自己的文献库">LaTeX中使用bib文件组织自己的文献库</a></h2>
 
  </header>
  <div class="entry-content">
  <!-- wp:paragraph -->
<p> BibTeX是LaTeX社区中 相当流行的参考文献格式化工具，在BibTeX涉及到两种特有的辅助的文件格式：<code>bst</code>&nbsp;和&nbsp;<code>bib</code>。</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><code>bst</code>&nbsp;是 (B)ibliography (ST)yle 的缩写。顾名思义，和&nbsp;<code>sty</code>&nbsp;文件是 style 的缩写一样，<code>bst</code>&nbsp;文件控制着参考文献列表的格式。在这里说的「格式」，主要指参考文献列表中的编号、排序规则、对人名的处理（是否缩写）、月份的处理（是否缩写）、期刊名称的缩写等。</p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p><code>bib</code>&nbsp;是 BibTeX 定义的「参考文献数据库」。通常，我们会按照 BibTeX 规定的格式，向&nbsp;<code>bib</code>&nbsp;文件写入多条文献信息。在实际使用时，我们就可以根据&nbsp;<code>bib</code>&nbsp;文件中定义的文献标记（label），从数据库中调取文献信息，继而排版成参考文献列表。 </p>
<!-- /wp:paragraph -->
<!-- wp:paragraph -->
<p>值得注意的是，<code>bib</code>&nbsp;是一个数据库，其中的内容并不一定等于 LaTeX 排版参考文献列表时的内容。也就是说，如果&nbsp;<code>bib</code>&nbsp;数据库中有 10 条文献信息，并不一定说 LaTeX 排版出来的 PDF 文件中，参考文献列表里也一定有 10 条。实际排版出来的参考文献列表中有多少条文献，实际是哪几条，具体由文中使用的&nbsp;<code>\cite</code>&nbsp;命令（以及&nbsp;<code>\nocite</code>&nbsp;命令）指定。如果没有使用&nbsp;<code>\cite</code>&nbsp;命令调取文献信息，那么即使在&nbsp;<code>bib</code>&nbsp;文件中定义了文献信息，也不会展现在参考文献列表中。</p>
<!-- /wp:paragraph -->
<!-- wp:heading -->
<h2>BibTeX 的工作流程</h2>
<!-- /wp:heading -->
<!-- wp:paragraph -->
<p> BibTeX 是一个参考文献格式化工具。这个定义，给 BibTeX 的用处做了良好的界定：BibTeX 不是用来排版参考文献的，更不是个排版工具，<strong>它只是根据需要，按照（<code>bst</code>&nbsp;文件规定的）某种格式，将（<code>bib</code>&nbsp;文件中包含的）参考文献信息，<em>格式化</em>&nbsp;为 LaTeX 能够使用的列表信息</strong>。 清楚了 BibTeX 需要做的事情（用软件工程的话说，就是清楚了 BibTeX 的 API），我们就可以理清 BibTeX 的工作流程。 </p>
<!-- /wp:paragraph -->
<!-- wp:heading {"level":3} -->
<h3>知道需要哪些参考文献信息</h3>
<!-- /wp:heading -->
<!-- wp:paragraph -->
<p> 既然 BibTeX 会<em>根据需要</em>&nbsp;格式化数据，那么首先要解决的问题就是：BibTeX 如何了解此处的「需求」。 对 BibTeX 稍有了解的读者可能知道，运行 BibTeX 的命令行命令是： </p>
<!-- /wp:paragraph -->
<!-- wp:preformatted -->
<pre class="wp-block-preformatted">bibtex&nbsp;foo</pre>
<!-- /wp:preformatted -->
<!-- wp:paragraph -->
<p> 实际上，BibTeX 正是通过读取&nbsp;<code>aux</code>&nbsp;文件中的&nbsp;<code>\citation{}</code>&nbsp;标记，来确定用户需要哪些参考文献的。 举个例子，假设用户用 LaTeX 编译了以下代码： </p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\documentclass{article}
\begin{document}
bar\cite{baz}
\end{document}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p> 如果该文件名为&nbsp;<code>foo.tex</code>，那么就会生成&nbsp;<code>foo.aux</code>。其内容大约是： </p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\relax
\citation{baz}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p> <code>\citation</code>&nbsp;是由&nbsp;<code>tex</code>&nbsp;文件中的&nbsp;<code>\cite</code>&nbsp;命令写入&nbsp;<code>aux</code>&nbsp;文件的标记。它说明了：用户需要标记为&nbsp;<code>baz</code>&nbsp;的参考文献信息。 当 BibTeX 读入&nbsp;<code>aux</code>&nbsp;文件的时候，它就会记录下所有&nbsp;<code>\citation</code>&nbsp;命令中的内容（即文献标记——label），这样就知道了用户需要哪些参考文献信息。 </p>
<!-- /wp:paragraph -->
<!-- wp:heading {"level":3} -->
<h3>了解文献列表格式以及读取文献数据库</h3>
<!-- /wp:heading -->
<!-- wp:paragraph -->
<p> 当 BibTeX 清楚了用户需要哪些文献信息，接下来自然应该搞清楚用户想要什么样的格式。而知道了格式之后，就可以从数据库中抽取所需的文献信息，按照格式准备数据。 为了讲清楚这个步骤，我们对上述 LaTeX 代码做些许的修改。 </p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\documentclass{article}
\begin{document}
\bibliographystyle{unsrt}
bar\cite{baz}
\bibliography{foobar}
\end{document}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p>我们将它保存为 <code>foo.tex</code>，经由 LaTeX 编译之后得到一个 <code>foo.aux</code> 文件，其内容如下： </p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\relax
\bibstyle{unsrt}
\citation{baz}
\bibdata{foobar}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p>简单的对比，不难发现：</p>
<!-- /wp:paragraph -->
<!-- wp:list {"ordered":true} -->
<ol><li><code>foo.tex</code>&nbsp;中新增的&nbsp;<code>\bibliographystyle{unsrt}</code>&nbsp;与&nbsp;<code>aux</code>&nbsp;文件中的&nbsp;<code>\bibstyle{unsrt}</code>&nbsp;相对应。</li><li><code>foo.tex</code>&nbsp;中新增的&nbsp;<code>\bibliography{foobar}</code>&nbsp;与&nbsp;<code>aux</code>&nbsp;文件中的&nbsp;<code>\bibdata{foobar}</code>&nbsp;相对应。</li></ol>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p>根据命令的名字，我们很容易猜测各个命令的作用。<code>tex</code>&nbsp;文件中的&nbsp;<code>\bibliographystyle</code>&nbsp;指定了用户期待的参考文献列表格式文件，并将其写入&nbsp;<code>aux</code>&nbsp;文件备用，通过&nbsp;<code>\bibstyle</code>&nbsp;标记。与此同时，<code>\bibliography</code>&nbsp;命令则用&nbsp;<code>\bibdata</code>&nbsp;在&nbsp;<code>aux</code>&nbsp;文件中记录了参考文献数据库的名字（不含扩展名）。 在这里，<code>unsrt</code>&nbsp;是 unsort 的缩写，它对应着&nbsp;<code>unsrt.bst</code>&nbsp;文件，是大多数 TeX 发行版自带的标准格式文件之一；<code>foobar</code>&nbsp;则对应着&nbsp;<code>foobar.bib</code>&nbsp;文件，该文件是用户自己编写或生成的参考文献数据库。</p>
<!-- /wp:paragraph -->
<!-- wp:heading {"level":3} -->
<h3>实际操作</h3>
<!-- /wp:heading -->
<!-- wp:paragraph -->
<p> 我们假设上述&nbsp;<code>myBibliography.bib</code>&nbsp;文件有如下内容： </p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"null","mime":"text/plain"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>@BOOK{
    baz,
    title = {Dummy Book},
    publisher = {Egypt},
    year = {321},
    author = {The King}
}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p><code>main.tex</code>中有</p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\documentclass{article}
\begin{document}
\bibliographystyle{unsrt}
bar\cite{baz}
\bibliography{myBibliography}
\end{document}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p>我们在命令行执行以下操作： </p>
<!-- /wp:paragraph -->
<!-- wp:preformatted -->
<pre class="wp-block-preformatted">latex&nbsp;main&nbsp;&nbsp;&nbsp;#&nbsp;对main.tex&nbsp;编译，生成main.aux
bibtex&nbsp;main&nbsp;#&nbsp;对main.aux编译</pre>
<!-- /wp:preformatted -->
<!-- wp:paragraph -->
<p>我们会发现，BibTeX 生成了两个文件：<code>main.bbl</code> 和 <code>main.blg</code>。其中 <code>main.bbl</code> 的内容如下：</p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\begin{thebibliography}{1}
\bibitem{baz}
The King.
\newblock {\em Dummy Book}.
\newblock Egypt, 321.
\end{thebibliography}</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p>显然，这就是一个标准的 LaTeX 环境。对 LaTeX 参考文献排版稍有了解的读者可能知道 <code>thebibliography</code> 环境正是 LaTeX 中手工编排参考文献时使用的环境。因此，<strong><code>main.bbl</code> 就是 BibTeX 格式化输出的结果</strong>，LaTeX 只需要将该文件的内容读入，就能在相应的位置输出格式化之后的参考文献列表了。 接下来，我们看看 <code>main.blg</code> 的内容。<code>blg</code> 实际是 BibTeX Log 的缩写，亦即这是一个日志文件。</p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"null","mime":"text/plain"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>This is BibTeX, Version 0.99d (TeX Live 2019/W32TeX)
Capacity: max_strings=200000, hash_size=200000, hash_prime=170003
The top-level auxiliary file: main.aux
The style file: unsrt.bst
Database file #1: myBibliography.bib
...</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p>我们看到，BibTeX 打出的日志文件中，记录了读入&nbsp;<code>aux</code>/<code>bst</code>/<code>bib</code>&nbsp;文件的情况。特别地，记录了所需的参考文献条目（entry）的数量（此处为 1）。 日志中值得注意的地方是在提到&nbsp;<code>bib</code>&nbsp;文件时，使用了&nbsp;<code>#1</code>&nbsp;的标记。既然存在&nbsp;<code>#1</code>，那么合理推测也可以存在<code>#2</code>。也就是说，BibTeX 可能支持两个或更多的&nbsp;<code>bib</code>&nbsp;数据库共同工作。具体如何实现，请读者自己阅读相关资料（手册或 Google 检索）后实验。 紧接着，我们再执行一次 LaTeX：</p>
<!-- /wp:paragraph -->
<!-- wp:preformatted -->
<pre class="wp-block-preformatted">latex main.tex</pre>
<!-- /wp:preformatted -->
<!-- wp:paragraph -->
<p>首先，来看看&nbsp;<code>aux</code>&nbsp;文件会发生什么变化：</p>
<!-- /wp:paragraph -->
<!-- wp:codemirror-blocks/code-block {"mode":"markdown","mime":"text/x-markdown"} -->
<div class="wp-block-codemirror-blocks-code-block code-block"><pre>\relax
\bibstyle{unsrt}
\citation{baz}
\bibdata{myBibliography}
\bibcite{baz}{1}
</pre></div>
<!-- /wp:codemirror-blocks/code-block -->
<!-- wp:paragraph -->
<p>相比上一次的 <code>main.aux</code>，在读入 BibTeX 之后，LaTeX 向 <code>aux</code> 文件写入了更多的信息。这里 <code>\bibcite{baz}{1}</code> 将 <code>baz</code> 这一参考文献标记（label）与参考文献编号（数字 1）绑定起来了。 接下来，我们看看 <code>dvi</code> 文件的内容：</p>
<!-- /wp:paragraph -->
<!-- wp:image {"id":1926,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://www.malic.xyz/wp-content/uploads/image-128.png" alt="[Image]" class="wp-image-1926"/></figure>
<!-- /wp:image -->
<!-- wp:paragraph -->
<p> 不难发现，由于读入了 <code>main.bbl</code> 文件，参考文献列表已经正确展现出来了。然而，正文中依然有一个问号。 实际上，LaTeX 需要 <code>aux</code> 文件中的 <code>\bibcite</code> 命令，将参考文献标记与参考文献编号关联起来，从而在 <code>tex</code>文件中的 <code>\cite</code> 命令位置填上正确的参考文献编号。我们注意到，在我们第二次执行 LaTeX 命令编译之前，<code>main.aux</code> 文件中是没有这些信息的，直到编译完成，这些信息才被正确写入。因此，第二次执行 LaTeX 命令时，LaTeX 还不能填入正确的文献编号，于是就写入了一个问号作为占位符。 解决这个问题的办法也很简单——此时 <code>aux</code> 文件中已经有了需要的信息，再编译一遍就好了。</p>
<!-- /wp:paragraph -->
<!-- wp:preformatted -->
<pre class="wp-block-preformatted">latex&nbsp;foo.tex</pre>
<!-- /wp:preformatted -->
<!-- wp:paragraph -->
<p>如果没有意外，此时的 <code>main.dvi</code> 文件应该看起来一切正常了。</p>
<!-- /wp:paragraph -->
<!-- wp:image {"id":1927,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://www.malic.xyz/wp-content/uploads/image-129.png" alt="[Image]" class="wp-image-1927"/></figure>
<!-- /wp:image -->
<!-- wp:heading {"level":3} -->
<h3>总结</h3>
<!-- /wp:heading -->
<!-- wp:list -->
<ul><li>BibTeX 是一个参考文献格式化工具，它会根据需要，按照（<code>bst</code>&nbsp;文件规定的）某种格式，将（<code>bib</code>&nbsp;文件中包含的）参考文献信息，<em>格式化</em>&nbsp;为 LaTeX 能够使用的列表信息。</li><li>正确使用 BibTeX 处理参考文献，需要先用 (Xe/PDF)LaTeX 编译&nbsp;<code>tex</code>&nbsp;文件，生成&nbsp;<code>aux</code>&nbsp;辅助文件。</li><li>执行 BibTeX 将读入&nbsp;<code>aux</code>&nbsp;文件，搞清楚用户需要哪些文献。</li><li>紧接着，BibTeX 根据&nbsp;<code>aux</code>&nbsp;文件中的内容，找到正确的&nbsp;<code>bst</code>&nbsp;和&nbsp;<code>bib</code>&nbsp;文件，并将参考文献信息格式化为 LaTeX 的&nbsp;<code>thebibliography</code>&nbsp;环境，作为&nbsp;<code>bbl</code>&nbsp;文件输出。</li><li>第二次执行 (Xe/PDF)LaTeX 将会读入新生成的&nbsp;<code>bbl</code>&nbsp;文件，同时更新&nbsp;<code>aux</code>&nbsp;文件。</li><li>此时，参考文献列表将会正常展示，但是正文中的引用标记显示为问号。</li><li>第三次执行 (Xe/PDF)LaTeX 将会读入&nbsp;<code>bbl</code>&nbsp;文件和更新过后的&nbsp;<code>aux</code>&nbsp;文件。此时，参考文献相关内容都正常显示。</li></ul>
<!-- /wp:list -->
<!-- wp:paragraph -->
<p>[TABS_R id=1738]</p>
<!-- /wp:paragraph -->
  </div>
  <footer>
    <p>Published: <time datetime="2020-07-13T03:00:49+09:00">
      月 13 7月 2020
    </time></p>
    <address>
      By           <a href="lyw6024.github.io/author/malic.html">malic</a>
    </address>
    <p>
        Category: <a href="lyw6024.github.io/category/all.html">All</a>
    </p>
  </footer>
  </article>
              </main>
              </div>
              <div class="cell small-2"></div>
          </div>
        </div>
        <footer>
                <address>
                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>,
                which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </address>
        </footer>
</body>
</html>